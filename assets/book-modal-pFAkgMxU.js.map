{"version":3,"file":"book-modal-pFAkgMxU.js","sources":["../../src/js/settings.js","../../src/js/api.js","../../src/js/book-modal.js"],"sourcesContent":["export const API_URL = \"https://books-backend.p.goit.global/books/\"","import axios from \"axios\"\nimport { API_URL } from \"./settings\"\n\naxios.defaults.baseURL = API_URL\n\nconst getCategoryList = async () => {\n\tconst { data } = await axios(\"category-list\")\n\treturn data\n}\n\nconst getTopBooks = async () => {\n\tconst { data } = await axios(\"top-books\")\n\treturn data\n}\n\nconst getBooksByCategory = async category => {\n\tconst { data } = await axios(\"category\", {\n\t\tparams: {\n\t\t\tcategory,\n\t\t},\n\t})\n\treturn data\n}\n\nconst getBookByID = async id => {\n\tconst { data } = await axios(id)\n\treturn data\n}\n\nexport { getCategoryList, getTopBooks, getBooksByCategory, getBookByID }\n","import { getBookByID } from \"./api\"\nimport Accordion from \"accordion-js\"\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\"\n\nimport { hideBookModal, openBookModal } from \"./helpers\"\n\nnew Accordion(\".accordion-container\", {\n\tduration: 250,\n\tshowMultiple: true,\n\telementClass: \"ac\",\n\ttriggerClass: \"ac-trigger\",\n\tpanelClass: \"ac-panel\",\n\tactiveClass: \"is-active\",\n})\n\nconst closeBtn = document.querySelector(\".modal-close-btn\")\nconst booksCountEl = document.querySelector(\".count-text\")\nconst minusEl = document.querySelector(\".minus-btn\")\nconst plusEl = document.querySelector(\".plus-btn\")\nconst addBtnEl = document.querySelector(\".add-btn\")\nconst formEl = document.querySelector(\".modal-book-form\")\nconst bookModalEl = document.querySelector(\".book-modal\")\n\nlet currentBookTitle = \"\"\nlet currentBook = null\nlet count = 1\nlet priceEl = null\nlet price = 0\n\nfunction addToCart(book, quantity) {\n\tconst localStorageKey = \"product\"\n\tconst savedData = localStorage.getItem(localStorageKey)\n\tconst products = savedData ? JSON.parse(savedData) : []\n\tconst savedBook = products.find(item => item._id === book._id)\n\n\tif (savedBook) {\n\t\tsavedBook.quantity += quantity\n\t} else {\n\t\tproducts.push({\n\t\t\t_id: book._id,\n\t\t\tbook_image: book.book_image,\n\t\t\ttitle: book.title,\n\t\t\tauthor: book.author,\n\t\t\tprice: book.price,\n\t\t\tquantity: quantity,\n\t\t})\n\t}\n\n\tlocalStorage.setItem(localStorageKey, JSON.stringify(products))\n}\n\nexport async function loadBookModal(bookId) {\n\ttry {\n\t\tconst book = await getBookByID(bookId)\n\t\trenderBookModal(book)\n\t\topenBookModal()\n\t\tdocument.body.style.overflow = \"hidden\"\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Could not download book!\",\n\t\t\tposition: \"topRight\",\n\t\t})\n\t}\n}\n\nfunction renderBookModal(book) {\n\tcurrentBook = book\n\tcurrentBookTitle = book.title\n\n\tconst imgEl = document.querySelector(\".modal-book-image\")\n\tconst titleEl = document.querySelector(\".modal-book-title\")\n\tconst authorEl = document.querySelector(\".modal-book-text\")\n\tpriceEl = document.querySelector(\".modal-book-price\")\n\n\timgEl.src = book.book_image\n\timgEl.alt = book.title\n\ttitleEl.textContent = book.title\n\tauthorEl.textContent = book.author\n\tpriceEl.textContent = `$${book.price}`\n\tprice = book.price\n\n\tcount = 1\n\tbooksCountEl.textContent = count\n}\n\nplusEl.addEventListener(\"click\", () => {\n\tcount += 1\n\tpriceEl.textContent = `$${(price * count).toFixed(2)}`\n\tbooksCountEl.textContent = count\n})\n\nminusEl.addEventListener(\"click\", () => {\n\tif (count > 1) {\n\t\tcount -= 1\n\t\tpriceEl.textContent = `$${(price * count).toFixed(2)}`\n\t\tbooksCountEl.textContent = count\n\t} else {\n\t\tpriceEl.textContent = `$${price}`\n\t}\n})\n\naddBtnEl.addEventListener(\"click\", () => {\n\tconst quantity = Number(booksCountEl.textContent)\n\tif (currentBook) {\n\t\taddToCart(currentBook, quantity)\n\t\tiziToast.success({\n\t\t\tmessage: `Added ${quantity} of ${currentBookTitle} to basket!`,\n\t\t\tposition: \"bottomRight\",\n\t\t\tcolor: \"#fff\",\n\t\t})\n\t}\n})\n\nformEl.addEventListener(\"submit\", event => {\n\tevent.preventDefault()\n\tiziToast.success({\n\t\tmessage: \"Thank you for your purchase!\",\n\t\tposition: \"bottomRight\",\n\t\tcolor: \"#fff\",\n\t})\n\thideBookModal()\n\tdocument.body.style.overflow = \"unset\"\n})\n\nbookModalEl.addEventListener(\"click\", el => {\n\tif (el.target === el.currentTarget) {\n\t\thideBookModal()\n\t\tdocument.body.style.overflow = \"unset\"\n\t}\n})\n\ncloseBtn.addEventListener(\"click\", () => {\n\thideBookModal()\n\tdocument.body.style.overflow = \"unset\"\n})\n\ndocument.addEventListener(\"keydown\", element => {\n\tif (element.key === \"Escape\") {\n\t\thideBookModal()\n\t\tdocument.body.style.overflow = \"unset\"\n\t}\n})\n"],"names":["API_URL","axios","getCategoryList","data","getTopBooks","getBooksByCategory","category","getBookByID","id","Accordion","closeBtn","booksCountEl","minusEl","plusEl","addBtnEl","formEl","bookModalEl","currentBookTitle","currentBook","count","priceEl","price","addToCart","book","quantity","localStorageKey","savedData","products","savedBook","item","loadBookModal","bookId","renderBookModal","openBookModal","iziToast","imgEl","titleEl","authorEl","event","hideBookModal","el","element"],"mappings":"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"}