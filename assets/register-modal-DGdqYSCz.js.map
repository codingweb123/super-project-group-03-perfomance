{"version":3,"file":"register-modal-DGdqYSCz.js","sources":["../../src/js/register-modal.js"],"sourcesContent":["import { refs } from \"./refs\"\nimport { hideRegisterModal } from \"./helpers\"\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\"\n\nconst registerModalFormEl = document.querySelector(\".register-form\")\nconst registerCloseBtn = document.querySelector(\".register-modal-close\")\n\nconst STORAGE_KEY = \"RegisterInfo\"\n\nregisterCloseBtn.addEventListener(\"click\", () => {\n\tdocument.body.style.overflow = \"unset\"\n\thideRegisterModal()\n})\n\nrefs.registerModal.addEventListener(\"click\", event => {\n\tif (event.target === event.currentTarget) {\n\t\tdocument.body.style.overflow = \"unset\"\n\t\thideRegisterModal()\n\t}\n})\ndocument.addEventListener(\"keydown\", event => {\n\tif (event.key === \"Escape\") {\n\t\tdocument.body.style.overflow = \"unset\"\n\t\thideRegisterModal()\n\t}\n})\n\nconst formData = {\n\tname: \"\",\n\temail: \"\",\n\tmessage: \"\",\n}\n\nconst savedInfo = localStorage.getItem(STORAGE_KEY)\nif (savedInfo) {\n\tconst savedData = JSON.parse(savedInfo)\n\tObject.keys(formData).forEach(key => {\n\t\tformData[key] = savedData[key] || \"\"\n\t\tregisterModalFormEl.elements[key].value = formData[key]\n\t})\n}\n\nregisterModalFormEl.addEventListener(\"submit\", handleRegisterSubmit)\n\nfunction handleRegisterSubmit(event) {\n\tevent.preventDefault()\n\n\tconst { name, email } = event.target.elements\n\n\tconst nameError = name.nextElementSibling\n\tconst emailError = email.nextElementSibling\n\n\tlet hasError = false\n\n\tif (name.value.trim() === \"\") {\n\t\tname.classList.add(\"error\")\n\t\tnameError.style.display = \"block\"\n\t\thasError = true\n\t} else {\n\t\tname.classList.remove(\"error\")\n\t\tnameError.style.display = \"none\"\n\t}\n\n\tif (email.value.trim() === \"\") {\n\t\temail.classList.add(\"error\")\n\t\temailError.style.display = \"block\"\n\t\thasError = true\n\t} else {\n\t\temail.classList.remove(\"error\")\n\t\temailError.style.display = \"none\"\n\t}\n\n\tif (!hasError) {\n\t\tObject.keys(formData).forEach(key => {\n\t\t\tformData[key] = \"\"\n\t\t})\n\n\t\tlocalStorage.removeItem(STORAGE_KEY)\n\t\tregisterModalFormEl.reset()\n\t\tiziToast.success({\n\t\t\ttitle: \"Registration\",\n\t\t\tmessage: \"You were successfully registered! Thank you.\",\n\t\t\tposition: \"bottomRight\",\n\t\t\tcolor: \"#fff\",\n\t\t})\n\t}\n}\n"],"names":["registerModalFormEl","registerCloseBtn","STORAGE_KEY","hideRegisterModal","refs","event","formData","savedInfo","savedData","key","handleRegisterSubmit","name","email","nameError","emailError","hasError","iziToast"],"mappings":"0FAKA,MAAMA,EAAsB,SAAS,cAAc,gBAAgB,EAC7DC,EAAmB,SAAS,cAAc,uBAAuB,EAEjEC,EAAc,eAEpBD,EAAiB,iBAAiB,QAAS,IAAM,CAChD,SAAS,KAAK,MAAM,SAAW,QAC/BE,EAAmB,CACpB,CAAC,EAEDC,EAAK,cAAc,iBAAiB,QAASC,GAAS,CACjDA,EAAM,SAAWA,EAAM,gBAC1B,SAAS,KAAK,MAAM,SAAW,QAC/BF,EAAmB,EAErB,CAAC,EACD,SAAS,iBAAiB,UAAWE,GAAS,CACzCA,EAAM,MAAQ,WACjB,SAAS,KAAK,MAAM,SAAW,QAC/BF,EAAmB,EAErB,CAAC,EAED,MAAMG,EAAW,CAChB,KAAM,GACN,MAAO,GACP,QAAS,EACV,EAEMC,EAAY,aAAa,QAAQL,CAAW,EAClD,GAAIK,EAAW,CACd,MAAMC,EAAY,KAAK,MAAMD,CAAS,EACtC,OAAO,KAAKD,CAAQ,EAAE,QAAQG,GAAO,CACpCH,EAASG,CAAG,EAAID,EAAUC,CAAG,GAAK,GAClCT,EAAoB,SAASS,CAAG,EAAE,MAAQH,EAASG,CAAG,CACxD,CAAE,CACF,CAEAT,EAAoB,iBAAiB,SAAUU,CAAoB,EAEnE,SAASA,EAAqBL,EAAO,CACpCA,EAAM,eAAgB,EAEtB,KAAM,CAAE,KAAAM,EAAM,MAAAC,CAAO,EAAGP,EAAM,OAAO,SAE/BQ,EAAYF,EAAK,mBACjBG,EAAaF,EAAM,mBAEzB,IAAIG,EAAW,GAEXJ,EAAK,MAAM,KAAI,IAAO,IACzBA,EAAK,UAAU,IAAI,OAAO,EAC1BE,EAAU,MAAM,QAAU,QAC1BE,EAAW,KAEXJ,EAAK,UAAU,OAAO,OAAO,EAC7BE,EAAU,MAAM,QAAU,QAGvBD,EAAM,MAAM,KAAI,IAAO,IAC1BA,EAAM,UAAU,IAAI,OAAO,EAC3BE,EAAW,MAAM,QAAU,QAC3BC,EAAW,KAEXH,EAAM,UAAU,OAAO,OAAO,EAC9BE,EAAW,MAAM,QAAU,QAGvBC,IACJ,OAAO,KAAKT,CAAQ,EAAE,QAAQG,GAAO,CACpCH,EAASG,CAAG,EAAI,EACnB,CAAG,EAED,aAAa,WAAWP,CAAW,EACnCF,EAAoB,MAAO,EAC3BgB,EAAS,QAAQ,CAChB,MAAO,eACP,QAAS,+CACT,SAAU,cACV,MAAO,MACV,CAAG,EAEH"}