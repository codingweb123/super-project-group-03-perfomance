import{c as a,d as f,i as m}from"./heavy-vendor-DzA-cfM-.js";import{a as b,b as l}from"./helpers-CeCOYa2k.js";const k="https://books-backend.p.goit.global/books/";a.defaults.baseURL=k;const M=async()=>{const{data:t}=await a("category-list");return t},T=async()=>{const{data:t}=await a("top-books");return t},R=async t=>{const{data:e}=await a("category",{params:{category:t}});return e},C=async t=>{const{data:e}=await a(t);return e};new f(".accordion-container",{duration:250,showMultiple:!0,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active"});const E=document.querySelector(".modal-close-btn"),i=document.querySelector(".count-text"),v=document.querySelector(".minus-btn"),S=document.querySelector(".plus-btn"),x=document.querySelector(".add-btn"),h=document.querySelector(".modal-book-form"),w=document.querySelector(".book-modal");let g="",u=null,o=1,n=null,r=0;function B(t,e){const c="product",s=localStorage.getItem(c),d=s?JSON.parse(s):[],y=d.find(p=>p._id===t._id);y?y.quantity+=e:d.push({_id:t._id,book_image:t.book_image,title:t.title,author:t.author,price:t.price,quantity:e}),localStorage.setItem(c,JSON.stringify(d))}async function q(t){try{const e=await C(t);_(e),b(),document.body.style.overflow="hidden"}catch{m.error({title:"Error",message:"Could not download book!",position:"topRight"})}}function _(t){u=t,g=t.title;const e=document.querySelector(".modal-book-image"),c=document.querySelector(".modal-book-title"),s=document.querySelector(".modal-book-text");n=document.querySelector(".modal-book-price"),e.src=t.book_image,e.alt=t.title,c.textContent=t.title,s.textContent=t.author,n.textContent=`$${t.price}`,r=t.price,o=1,i.textContent=o}S.addEventListener("click",()=>{o+=1,n.textContent=`$${(r*o).toFixed(2)}`,i.textContent=o});v.addEventListener("click",()=>{o>1?(o-=1,n.textContent=`$${(r*o).toFixed(2)}`,i.textContent=o):n.textContent=`$${r}`});x.addEventListener("click",()=>{const t=Number(i.textContent);u&&(B(u,t),m.success({message:`Added ${t} of ${g} to basket!`,position:"bottomRight",color:"#fff"}))});h.addEventListener("submit",t=>{t.preventDefault(),m.success({message:"Thank you for your purchase!",position:"bottomRight",color:"#fff"}),l(),document.body.style.overflow="unset"});w.addEventListener("click",t=>{t.target===t.currentTarget&&(l(),document.body.style.overflow="unset")});E.addEventListener("click",()=>{l(),document.body.style.overflow="unset"});document.addEventListener("keydown",t=>{t.key==="Escape"&&(l(),document.body.style.overflow="unset")});const I=Object.freeze(Object.defineProperty({__proto__:null,loadBookModal:q},Symbol.toStringTag,{value:"Module"}));export{R as a,T as b,I as c,M as g,q as l};
//# sourceMappingURL=book-modal-pFAkgMxU.js.map
