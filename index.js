import"./assets/styles-D4zL8vh_.js";import{S as w,N as M,A as Q,K as $,a as v,b as W,i as d,c as I,P as _,g as c,d as X}from"./assets/vendor-ODyRz-Y0.js";document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("img[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src)),document.querySelectorAll("source[data-srcset]").forEach(e=>e.setAttribute("srcset",e.dataset.srcset))},800)});new w(".hero .swiper",{modules:[M,Q,$],slidesPerView:1,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3,disableOnInteraction:!0},navigation:{nextEl:".right-btn",prevEl:".left-btn"}});const L={header:document.querySelector(".header"),hero:document.querySelector(".hero"),books:document.querySelector(".books"),feedbacks:document.querySelector(".feedbacks"),events:document.querySelector(".events"),footer:document.querySelector(".footer"),registerModal:document.querySelector(".register-modal"),bookModal:document.querySelector(".book-modal")},Z="https://books-backend.p.goit.global/books/";v.defaults.baseURL=Z;const ee=async()=>{const{data:e}=await v("category-list");return e},te=async()=>{const{data:e}=await v("top-books");return e},oe=async e=>{const{data:t}=await v("category",{params:{category:e}});return t},re=async e=>{const{data:t}=await v(e);return t},{registerModal:V,bookModal:F}=L,ne=()=>V.classList.add("is-open"),E=()=>V.classList.remove("is-open"),ae=()=>F.classList.add("is-open"),S=()=>F.classList.remove("is-open");new W(".accordion-container",{duration:250,showMultiple:!0,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active"});const se=document.querySelector(".modal-close-btn"),x=document.querySelector(".count-text"),ie=document.querySelector(".minus-btn"),ce=document.querySelector(".plus-btn"),le=document.querySelector(".add-btn"),de=document.querySelector(".modal-book-form"),ue=document.querySelector(".book-modal");let H="",q=null,u=1,h=null,k=0;function me(e,t){const o="product",r=localStorage.getItem(o),a=r?JSON.parse(r):[],s=a.find(i=>i._id===e._id);s?s.quantity+=t:a.push({_id:e._id,book_image:e.book_image,title:e.title,author:e.author,price:e.price,quantity:t}),localStorage.setItem(o,JSON.stringify(a))}async function fe(e){try{const t=await re(e);ge(t),ae(),document.body.style.overflow="hidden"}catch{d.error({title:"Error",message:"Could not download book!",position:"topRight"})}}function ge(e){q=e,H=e.title;const t=document.querySelector(".modal-book-image"),o=document.querySelector(".modal-book-title"),r=document.querySelector(".modal-book-text");h=document.querySelector(".modal-book-price"),t.src=e.book_image,t.alt=e.title,o.textContent=e.title,r.textContent=e.author,h.textContent=`$${e.price}`,k=e.price,u=1,x.textContent=u}ce.addEventListener("click",()=>{u+=1,h.textContent=`$${(k*u).toFixed(2)}`,x.textContent=u});ie.addEventListener("click",()=>{u>1?(u-=1,h.textContent=`$${(k*u).toFixed(2)}`,x.textContent=u):h.textContent=`$${k}`});le.addEventListener("click",()=>{const e=Number(x.textContent);q&&(me(q,e),d.success({message:`Added ${e} of ${H} to basket!`,position:"bottomRight",color:"#fff"}))});de.addEventListener("submit",e=>{e.preventDefault(),d.success({message:"Thank you for your purchase!",position:"bottomRight",color:"#fff"}),S(),document.body.style.overflow="unset"});ue.addEventListener("click",e=>{e.target===e.currentTarget&&(S(),document.body.style.overflow="unset")});se.addEventListener("click",()=>{S(),document.body.style.overflow="unset"});document.addEventListener("keydown",e=>{e.key==="Escape"&&(S(),document.body.style.overflow="unset")});const{books:A}=L,y=A.querySelector(".books-list"),Y=A.querySelector(".categories-btn"),m=A.querySelector(".categories"),ye=()=>!matchMedia("(hover: hover)").matches,g=()=>ye()?10:24,T=4,pe=document.querySelector(".pagination-number"),p=document.querySelector(".btn.more"),be=document.querySelector(".pagination-all"),K=()=>{p.classList.remove("visually-hidden")},O=()=>{p.classList.add("visually-hidden")},z=e=>{y.innerHTML=e.reduce((t,{_id:o,book_image:r,title:a,price:s,author:i})=>t+=`
				<li>
				<img
				src="${r}"
				loading="lazy"
				alt="${a}"
				/>
				<h3><b>${a}</b><span class="price">$${s}</span></h3>
				<p class="author">${i}</p>
				<button class="btn" data-bookid="${o}">Learn More</button>
				</li>`,""),I.refresh()},he=e=>{y.innerHTML+=e.reduce((t,{_id:o,book_image:r,title:a,price:s,author:i})=>t+=`
    <li>
        <img
            src="${r}"
			loading="lazy"
            alt="${a}"
        />
        <h3><b>${a}</b><span class="price">$${s}</span></h3>
        <p class="author">${i}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},ve=(e,t=0)=>e.slice(t*T,(t+1)*T),J=(e,t=0)=>e.slice(t*g(),(t+1)*g()),P=(e,t)=>{pe.textContent=e.length<t?e.length.toString():t.toString()},U=e=>{be.textContent=e.toString()},ke=()=>{y.innerHTML=[0,0,0,0].reduce((e,t)=>e+=`
    <li>
        <img
		    src="data:image/gif;base64,R0lGODlhAQABAAAAACw="
            class="loading"
            alt=""
        />
        <h3><b class="loading">................................................</b><span class="price loading">............</span></h3>
        <p class="author loading">............... ............</p>
        <button class="btn" disabled>Learn More</button>
    </li>`,"")},we=e=>{for(let t=0;t<15;t++)e.innerHTML+='<li class="loading">........................................................................................</li>'},D=e=>{e.querySelectorAll(".loading").forEach(t=>t.remove())};let l=[],f=0;const j=async()=>{l=[],f=0,O(),te().then(e=>{D(y),e.forEach(t=>l.push(...t.books)),z(J(l)),f+=1,l.length>g()&&K(),P(l,g()),U(l.length)}).catch(()=>{d.error({message:"Error while getting data from all categories!"})})};document.addEventListener("DOMContentLoaded",async()=>{we(m),setTimeout(async()=>{ee().then(e=>{D(m),m.innerHTML+=e.reduce((t,{list_name:o})=>t+=o?`<li>${o}`:"","")}).catch(()=>{d.error({message:"Error while getting data from categories!"})});try{await j()}catch{d.error({message:"Error while getting books data!"})}},1e3)});Y.addEventListener("click",()=>{m.classList.toggle("active")});m.addEventListener("click",async e=>{if(e.target===e.currentTarget||!e.target||e.target.classList.contains("active"))return;m.querySelectorAll("li.active").forEach(o=>o.classList.remove("active")),e.target.classList.add("active");const t=e.target.textContent;if(Y.textContent=t,m.classList.remove("active"),ke(),O(),e.target.dataset.value==="all"){await j();return}l=[],f=0,oe(t).then(o=>{l=o,z(J(o)),f+=1,o.length>g()&&K(),P(o,g()),U(o.length)}).catch(()=>{d.error({message:"Error while getting data from category!"})}).finally(()=>D(y))});p.addEventListener("click",e=>{e.preventDefault(),p.disabled=!0;const t=g()+f*T;if(l.length-t>0){const r=ve(l,f);he(r),f++;const a=t+r.length;P(l,a),a>=l.length&&(O(),d.success({position:"bottomRight",message:"This is the last page of books for you :)",color:"#fff"})),p.disabled=!1}else d.error({message:"You already loaded all books from that category!"})});y.addEventListener("click",async e=>{e.target.nodeName!="BUTTON"||e.target.classList!="btn"||await fe(e.target.dataset.bookid)});const Le=document.querySelector(".feedbacks-swiper");Le&&new w(".feedbacks-swiper",{modules:[M,_,$],slidesPerView:3,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-btn-next",prevEl:".feedbacks-btn-prev"},keyboard:{enabled:!0},breakpoints:{0:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});const{registerModal:Ee}=L;w.use([M,_,$]);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".event-register").forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),document.body.style.overflow="hidden",ne()})}),Ee.addEventListener("click",t=>{t.target===t.currentTarget&&(document.body.style.overflow="unset",E())})});new w(".events .swiper",{spaceBetween:24,slidesPerView:1,navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},pagination:{el:".pagination",clickable:!0},keyboard:{enabled:!0},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});const Se=document.querySelector(".form-footer"),xe=document.querySelector(".footer-email-field"),qe=document.querySelector(".footer-btn");Se.addEventListener("submit",function(e){e.preventDefault(),d.success({title:"Success",message:"Thank you! You have successfully subscribed to the newsletter.",position:"bottomRight",timeout:3e3,backgroundColor:"#ffffff"}),xe.value="",qe.disabled=!0});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("iframe[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src))},800)});const B=document.querySelector("#scrollToTopBtn");window.addEventListener("scroll",()=>{scrollY>300?B.classList.add("show"):B.classList.remove("show")});B.addEventListener("click",()=>{scrollTo({top:0,behavior:"smooth"})});const R=document.querySelector(".register-form"),Te=document.querySelector(".register-modal-close"),G="RegisterInfo";Te.addEventListener("click",()=>{document.body.style.overflow="unset",E()});L.registerModal.addEventListener("click",e=>{e.target===e.currentTarget&&(document.body.style.overflow="unset",E())});document.addEventListener("keydown",e=>{e.key==="Escape"&&(document.body.style.overflow="unset",E())});const b={name:"",email:"",message:""},N=localStorage.getItem(G);if(N){const e=JSON.parse(N);Object.keys(b).forEach(t=>{b[t]=e[t]||"",R.elements[t].value=b[t]})}R.addEventListener("submit",Be);function Be(e){e.preventDefault();const{name:t,email:o}=e.target.elements,r=t.nextElementSibling,a=o.nextElementSibling;let s=!1;t.value.trim()===""?(t.classList.add("error"),r.style.display="block",s=!0):(t.classList.remove("error"),r.style.display="none"),o.value.trim()===""?(o.classList.add("error"),a.style.display="block",s=!0):(o.classList.remove("error"),a.style.display="none"),s||(Object.keys(b).forEach(i=>{b[i]=""}),localStorage.removeItem(G),R.reset(),d.success({title:"Registration",message:"You were successfully registered! Thank you.",position:"bottomRight",color:"#fff"}))}const Ce=document.querySelector(".menu"),Me=document.querySelector(".burger-btn"),C=document.querySelector(".menu-overlay");Me.addEventListener("click",()=>{document.body.style.overflow="hidden",C.classList.add("is-open")});Ce.addEventListener("click",e=>{e.getAttribute("href").contains("#")&&e.preventDefault();let t=e.target;(t.nodeName==="use"||t.nodeName==="svg")&&(t=t.closest(".menu-close-btn")),t.classList.contains("menu-close-btn")&&(C.classList.remove("is-open"),document.body.style.overflow="unset"),t.classList.contains("menu-nav-link")&&(C.classList.remove("is-open"),document.body.style.overflow="unset")});c.registerPlugin(I,X);document.querySelectorAll("a[href]").forEach(e=>{e.onclick=t=>{let o=t.target.closest("a");o.getAttribute("href").includes("#")&&o.getAttribute("href")!="#"&&(t.preventDefault(),c.to(window,{duration:.7,ease:"power1.inOut",scrollTo:`${o.getAttribute("href")}`}))}});document.addEventListener("DOMContentLoaded",()=>{let e=c.timeline({ease:"power1.inOut"});e.from("header",{y:-40,opacity:.5}),e.from("header .header-logo",{y:-5,opacity:0,duration:.15});for(let n=1;n<6;n++)e.from(`header .header-nav-list .header-nav-item:nth-child(${n})`,{x:-5,y:-15,opacity:0,duration:.15});let t=c.timeline({ease:"power1.inOut"});t.from(".hero img",{x:-45,opacity:0,duration:.15}),t.from(".hero h2",{y:-115,opacity:0,duration:.4}),t.from(".hero .banner-btn",{x:-45,opacity:0,duration:.3}),t.from(".hero h1",{y:-115,opacity:0,duration:.4}),t.from(".hero .left-btn",{y:-40,opacity:0,duration:.15}),t.from(".hero .right-btn",{y:-40,opacity:0,duration:.15});let o=c.timeline({scrollTrigger:{trigger:".feedbacks",start:"top 80%"},delay:.5,ease:"power1.inOut"});o.from(".feedbacks-title",{y:-65,opacity:0,duration:.5}),o.from(".feedbacks-text",{x:-65,opacity:0,duration:.3});for(let n=1;n<4;n++)o.from(`.feedbacks .swiper-slide:nth-child(${n})`,{x:-5,y:-15,opacity:0,duration:.15});c.utils.toArray(".feedbacks .swiper-pagination-bullet").forEach(n=>{o.from(n,{x:-5,y:-15,opacity:0,duration:.1})}),o.from(".feedbacks .feedbacks-btn-prev",{y:-40,opacity:0,duration:.15}),o.from(".feedbacks .feedbacks-btn-next",{y:-40,opacity:0,duration:.15});let r=c.timeline({scrollTrigger:{trigger:".events",start:"top 60%"},delay:.5,ease:"power1.inOut"});r.from(".events h4",{y:-65,opacity:0,duration:.5}),r.from(".events h2",{x:-65,opacity:0,duration:.3}),r.from(".events .event-text",{x:-65,opacity:0,duration:.3});for(let n=1;n<4;n++)r.from(`.events .swiper-slide:nth-child(${n})`,{x:-5,y:-15,opacity:0,duration:.15});c.utils.toArray(".events .swiper-pagination-bullet").forEach(n=>{r.from(n,{x:-5,y:-15,opacity:0,duration:.1})}),r.from(".events .events-button-prev",{y:-40,opacity:0,duration:.15}),r.from(".events .events-button-next",{y:-40,opacity:0,duration:.15});let a=c.timeline({scrollTrigger:{trigger:".article",start:"top center"},delay:.4,ease:"power1.inOut"});a.from(".article img",{x:-45,opacity:0,duration:.15}),a.from(".article h2",{y:-115,opacity:0,duration:.4}),a.from(".article p",{x:-45,opacity:0,duration:.3});let s=c.timeline({scrollTrigger:{trigger:".location",start:"top 10%"},delay:.15,ease:"power1.inOut"});s.from(".location .loc-sec",{x:-45,opacity:0,duration:.15}),s.from(".location h2",{x:-45,opacity:0,duration:.15}),s.from(".location .loc-text",{x:-45,opacity:0,duration:.15}),s.from(".location iframe",{y:-115,opacity:0,duration:.2}),c.utils.toArray(".location .loc-link").forEach(n=>{s.from(n,{x:45,y:-5,opacity:0,duration:.15})});let i=c.timeline({scrollTrigger:{trigger:".footer",start:"top center"},delay:.4,ease:"power1.inOut"});i.from(".footer .footer-logo",{y:-5,opacity:0,duration:.15});for(let n=1;n<5;n++)e.from(`.footer .footer-nav-item:nth-child(${n})`,{x:-5,y:-15,opacity:0,duration:.15});i.from(".footer .footer-form-text",{x:-45,opacity:0,duration:.15}),i.from(".footer .footer-form-label",{x:-45,opacity:0,duration:.15}),i.from(".footer .footer-afterform-text",{x:-45,opacity:0,duration:.15}),i.from(".footer .footer-company-text",{x:-45,opacity:0,duration:.15})});
//# sourceMappingURL=index.js.map
