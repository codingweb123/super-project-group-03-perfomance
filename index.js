import"./assets/styles-vd6Bsb6-.js";import{S as h,N as M,A as j,K as T,a as p,b as G,i as a,P as O}from"./assets/vendor-BDDvTSZg.js";document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("img[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src)),document.querySelectorAll("source[data-srcset]").forEach(e=>e.setAttribute("srcset",e.dataset.srcset))},800)});new h(".hero .swiper",{modules:[M,j,T],slidesPerView:1,spaceBetween:20,keyboard:{enabled:!0},autoplay:{delay:3e3,disableOnInteraction:!0},navigation:{nextEl:".right-btn",prevEl:".left-btn"}});const k={header:document.querySelector(".header"),hero:document.querySelector(".hero"),books:document.querySelector(".books"),feedbacks:document.querySelector(".feedbacks"),events:document.querySelector(".events"),footer:document.querySelector(".footer"),registerModal:document.querySelector(".register-modal"),bookModal:document.querySelector(".book-modal")},Q="https://books-backend.p.goit.global/books/";p.defaults.baseURL=Q;const W=async()=>{const{data:e}=await p("category-list");return e},X=async()=>{const{data:e}=await p("top-books");return e},Z=async e=>{const{data:t}=await p("category",{params:{category:e}});return t},ee=async e=>{const{data:t}=await p(e);return t},{registerModal:I,bookModal:V}=k,te=()=>I.classList.add("is-open"),L=()=>I.classList.remove("is-open"),oe=()=>V.classList.add("is-open"),E=()=>V.classList.remove("is-open");new G(".accordion-container",{duration:250,showMultiple:!0,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active"});const se=document.querySelector(".modal-close-btn"),w=document.querySelector(".count-text"),ne=document.querySelector(".minus-btn"),re=document.querySelector(".plus-btn"),ae=document.querySelector(".add-btn"),ce=document.querySelector(".modal-book-form"),ie=document.querySelector(".book-modal");let _="",S=null,i=1,f=null,v=0;function le(e,t){const o="product",n=localStorage.getItem(o),s=n?JSON.parse(n):[],c=s.find(l=>l._id===e._id);c?c.quantity+=t:s.push({_id:e._id,book_image:e.book_image,title:e.title,author:e.author,price:e.price,quantity:t}),localStorage.setItem(o,JSON.stringify(s))}async function de(e){try{const t=await ee(e);ue(t),oe(),document.body.style.overflow="hidden"}catch{a.error({title:"Error",message:"Could not download book!",position:"topRight"})}}function ue(e){S=e,_=e.title;const t=document.querySelector(".modal-book-image"),o=document.querySelector(".modal-book-title"),n=document.querySelector(".modal-book-text");f=document.querySelector(".modal-book-price"),t.src=e.book_image,t.alt=e.title,o.textContent=e.title,n.textContent=e.author,f.textContent=`$${e.price}`,v=e.price,i=1,w.textContent=i}re.addEventListener("click",()=>{i+=1,f.textContent=`$${(v*i).toFixed(2)}`,w.textContent=i});ne.addEventListener("click",()=>{i>1?(i-=1,f.textContent=`$${(v*i).toFixed(2)}`,w.textContent=i):f.textContent=`$${v}`});ae.addEventListener("click",()=>{const e=Number(w.textContent);S&&(le(S,e),a.success({message:`Added ${e} of ${_} to basket!`,position:"bottomRight",color:"#fff"}))});ce.addEventListener("submit",e=>{e.preventDefault(),a.success({message:"Thank you for your purchase!",position:"bottomRight",color:"#fff"}),E(),document.body.style.overflow="unset"});ie.addEventListener("click",e=>{e.target===e.currentTarget&&(E(),document.body.style.overflow="unset")});se.addEventListener("click",()=>{E(),document.body.style.overflow="unset"});document.addEventListener("keydown",e=>{e.key==="Escape"&&(E(),document.body.style.overflow="unset")});const{books:x}=k,g=x.querySelector(".books-list"),F=x.querySelector(".categories-btn"),d=x.querySelector(".categories"),me=()=>!matchMedia("(hover: hover)").matches,m=()=>me()?10:24,q=4,D=document.querySelector(".pagination-number"),y=document.querySelector(".btn.more"),ge=document.querySelector(".pagination-all"),H=()=>{y.classList.remove("visually-hidden")},$=()=>{y.classList.add("visually-hidden")},Y=e=>{g.innerHTML=e.reduce((t,{_id:o,book_image:n,title:s,price:c,author:l})=>t+=`
    <li>
        <img
            src="${n}"
			loading="lazy"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${c}</span></h3>
        <p class="author">${l}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},ye=e=>{g.innerHTML+=e.reduce((t,{_id:o,book_image:n,title:s,price:c,author:l})=>t+=`
    <li>
        <img
            src="${n}"
			loading="lazy"
            alt="${s}"
        />
        <h3><b>${s}</b><span class="price">$${c}</span></h3>
        <p class="author">${l}</p>
        <button class="btn" data-bookid="${o}">Learn More</button>
    </li>`,"")},be=(e,t=0)=>e.slice(t*q,(t+1)*q),K=(e,t=0)=>e.slice(t*m(),(t+1)*m()),A=(e,t)=>{console.log(D.textContent),D.textContent=e.length<t?e.length.toString():t.toString()},z=e=>{ge.textContent=e.toString()},fe=()=>{g.innerHTML=[0,0,0].reduce((e,t)=>e+=`
    <li>
        <img
		    src="data:image/gif;base64,R0lGODlhAQABAAAAACw="
            class="loading"
            alt=""
        />
        <h3><b class="loading">................................................</b><span class="price loading">............</span></h3>
        <p class="author loading">............... ............</p>
        <button class="btn" disabled>Learn More</button>
    </li>`,"")},pe=e=>{for(let t=0;t<15;t++)e.innerHTML+='<li class="loading">........................................................................................</li>'},P=e=>{e.querySelectorAll(".loading").forEach(t=>t.remove())};let r=[],u=0;const J=async()=>{r=[],u=0,$(),X().then(e=>{P(g),e.forEach(t=>r.push(...t.books)),Y(K(r)),u+=1,r.length>m()&&H(),A(r,m()),z(r.length)}).catch(()=>{a.error({message:"Error while getting data from all categories!"})})};document.addEventListener("DOMContentLoaded",async()=>{pe(d),setTimeout(async()=>{W().then(e=>{P(d),d.innerHTML+=e.reduce((t,{list_name:o})=>t+=o?`<li>${o}`:"","")}).catch(()=>{a.error({message:"Error while getting data from categories!"})});try{await J()}catch{a.error({message:"Error while getting books data!"})}},1e3)});F.addEventListener("click",()=>{d.classList.toggle("active")});d.addEventListener("click",async e=>{if(e.target===e.currentTarget||!e.target||e.target.classList.contains("active"))return;d.querySelectorAll("li.active").forEach(o=>o.classList.remove("active")),e.target.classList.add("active");const t=e.target.textContent;if(F.textContent=t,d.classList.remove("active"),fe(),$(),e.target.dataset.value==="all"){await J();return}r=[],u=0,Z(t).then(o=>{r=o,Y(K(o)),u+=1,o.length>m()&&H(),A(o,m()),z(o.length)}).catch(()=>{a.error({message:"Error while getting data from category!"})}).finally(()=>P(g))});y.addEventListener("click",e=>{e.preventDefault(),y.disabled=!0;const t=m()+u*q,o=r.length-t;if(console.log(o),o>0){const n=be(r,u);ye(n),u++;const s=t+n.length;A(r,s),s>=r.length&&($(),a.success({position:"bottomRight",message:"This is the last page of books for you :)",color:"#fff"})),y.disabled=!1}else a.error({message:"You already loaded all books from that category!"})});g.addEventListener("click",async e=>{e.target.nodeName!="BUTTON"||e.target.classList!="btn"||await de(e.target.dataset.bookid)});const ve=document.querySelector(".feedbacks-swiper");ve&&new h(".feedbacks-swiper",{modules:[M,O,T],slidesPerView:3,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-btn-next",prevEl:".feedbacks-btn-prev"},keyboard:{enabled:!0},breakpoints:{0:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});const{registerModal:he}=k;h.use([M,O,T]);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".event-register").forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),document.body.style.overflow="hidden",te()})}),he.addEventListener("click",t=>{t.target===t.currentTarget&&(document.body.style.overflow="unset",L())})});new h(".events .swiper",{spaceBetween:24,slidesPerView:1,navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},pagination:{el:".pagination",clickable:!0},keyboard:{enabled:!0},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});const ke=document.querySelector(".form-footer"),Le=document.querySelector(".footer-email-field"),Ee=document.querySelector(".footer-btn");ke.addEventListener("submit",function(e){e.preventDefault(),a.success({title:"Success",message:"Thank you! You have successfully subscribed to the newsletter.",position:"bottomRight",timeout:3e3,backgroundColor:"#ffffff"}),Le.value="",Ee.disabled=!0});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("iframe[data-src]").forEach(e=>e.setAttribute("src",e.dataset.src))},800)});const B=document.querySelector("#scrollToTopBtn");window.addEventListener("scroll",()=>{scrollY>300?B.classList.add("show"):B.classList.remove("show")});B.addEventListener("click",()=>{scrollTo({top:0,behavior:"smooth"})});const R=document.querySelector(".register-form"),we=document.querySelector(".register-modal-close"),U="RegisterInfo";we.addEventListener("click",()=>{document.body.style.overflow="unset",L()});k.registerModal.addEventListener("click",e=>{e.target===e.currentTarget&&(document.body.style.overflow="unset",L())});document.addEventListener("keydown",e=>{e.key==="Escape"&&(document.body.style.overflow="unset",L())});const b={name:"",email:"",message:""},N=localStorage.getItem(U);if(N){const e=JSON.parse(N);Object.keys(b).forEach(t=>{b[t]=e[t]||"",R.elements[t].value=b[t]})}R.addEventListener("submit",Se);function Se(e){e.preventDefault();const{name:t,email:o}=e.target.elements,n=t.nextElementSibling,s=o.nextElementSibling;let c=!1;t.value.trim()===""?(t.classList.add("error"),n.style.display="block",c=!0):(t.classList.remove("error"),n.style.display="none"),o.value.trim()===""?(o.classList.add("error"),s.style.display="block",c=!0):(o.classList.remove("error"),s.style.display="none"),c||(Object.keys(b).forEach(l=>{b[l]=""}),localStorage.removeItem(U),R.reset(),a.success({title:"Registration",message:"You were successfully registered! Thank you.",position:"bottomRight",color:"#fff"}))}const qe=document.querySelector(".menu"),Be=document.querySelector(".burger-btn"),C=document.querySelector(".menu-overlay");Be.addEventListener("click",()=>{document.body.style.overflow="hidden",C.classList.add("is-open")});qe.addEventListener("click",e=>{e.preventDefault();let t=e.target;(t.nodeName==="use"||t.nodeName==="svg")&&(t=t.closest(".menu-close-btn")),t.classList.contains("menu-close-btn")&&(C.classList.remove("is-open"),document.body.style.overflow="unset"),t.classList.contains("menu-nav-link")&&(C.classList.remove("is-open"),document.querySelector(t.getAttribute("href")).scrollIntoView({behavior:"smooth"}))});
//# sourceMappingURL=index.js.map
